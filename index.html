<!doctype html>
<html ng-app="protocoloApp">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="">
        <meta name="author" content="">
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
     
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
        
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
        
        <link href="https://file.myfontastic.com/mnEaDyrxtBPxRTfG7ZvwSE/icons.css" rel="stylesheet">
        
        <link href="https://fonts.googleapis.com/css?family=Raleway|Sumana" rel="stylesheet">
        
        
        
        <script src="./app.js"></script>
        <link rel="stylesheet" href="./protocolo.css">
    </head>
    <body ng-controller="ViewController as viewCtrl">
        <div class="container-fluid">
            <div class="page-header">
                <h2 class="sumana">Protocolo de diseño Caso-Control BIFAP v0.31 <span class="glyphicon glyphicon-cog" ng-click="viewCtrl.test()"></span></h2>
            </div>
            <div class="row fixed-height padded">
                <div class="col-md-12">
                    <div class="col-md-3" role="navigation">
                        <ul class="nav nav-pills nav-stacked">
                            <li ng-class="{'active': viewCtrl.checkSubsection('general','main')}"><a ng-click="viewCtrl.setSubsection('general','main')" href="#">General <span class="glyphicon glyphicon-ok-sign bf-completed" ng-show="viewCtrl.checkCompleteness('general','main').validation"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('general','titulo')}" ng-show="viewCtrl.viewFlags.activeSection=='general'" ><a ng-click="viewCtrl.setSubsection('general','titulo')" href="#" class="bf-menu-subsect">Título e hipótesis <span class="glyphicon glyphicon-ok-sign bf-completed" ng-show="viewCtrl.checkCompleteness('general','titulo').validation"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('general','antecedentes')}" ng-show="viewCtrl.viewFlags.activeSection=='general'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('general','antecedentes')" href="#">Antecedentes <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('general','antecedentes').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('general','objetivos')}" ng-show="viewCtrl.viewFlags.activeSection=='general'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('general','objetivos')" href="#">Objetivos <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('general','objetivos').validation}"></span></a></li>
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('poblacion','main')}"><a ng-click="viewCtrl.setSubsection('poblacion','main')" href="#">Población <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('poblacion','main').validation}"></span></a></li>
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('poblacion','periodo')}" ng-show="viewCtrl.viewFlags.activeSection=='poblacion'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('poblacion','periodo')" href="#">Periodo, edad y sexo <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('poblacion','periodo').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('poblacion','inclusion')}" ng-show="viewCtrl.viewFlags.activeSection=='poblacion'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('poblacion','inclusion')" href="#">Criterios de inclusión <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('poblacion','inclusion').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('poblacion','exclusion')}" ng-show="viewCtrl.viewFlags.activeSection=='poblacion'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('poblacion','exclusion')" href="#">Criterios de exclusión <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('poblacion','exclusion').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('poblacion','comentarios')}" ng-show="viewCtrl.viewFlags.activeSection=='poblacion'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('poblacion','comentarios')" href="#">Comentarios <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('poblacion','comentarios').validation}"></span></a></li>
                            
                            
                            
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('evento','main')}"><a ng-click="viewCtrl.setSubsection('evento','main')" href="#">Evento <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('evento','main').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('evento','definicion')}" ng-show="viewCtrl.viewFlags.activeSection=='evento'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('evento','definicion')" href="#">Definición de caso <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('evento','definicion').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('evento','avanzadas')}" ng-show="viewCtrl.viewFlags.activeSection=='evento'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('evento','avanzadas')" href="#">Opciones avanzadas <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('evento','avanzadas').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('evento','comentarios')}" ng-show="viewCtrl.viewFlags.activeSection=='evento'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('evento','comentarios')" href="#">Comentarios <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('evento','comentarios').validation}"></span></a></li>
                            
                            
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('controles','main')}"><a ng-click="viewCtrl.setSubsection('controles','main')" href="#">Controles <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('controles','main').validation}"></span></a></li>
                            

                            
                            
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('exposicion','main')}"><a ng-click="viewCtrl.setSubsection('exposicion','main')" href="#">Exposición principal <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('exposicion','main').validation}"></span></a></li>
                            
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('exposicion','definicion')}" ng-show="viewCtrl.viewFlags.activeSection=='exposicion'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('exposicion','definicion')" href="#">Definición  <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('exposicion','definicion').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('exposicion','avanzadas')}" ng-show="viewCtrl.viewFlags.activeSection=='exposicion'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('exposicion','avanzadas')" href="#">Opciones avanzadas <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('exposicion','avanzadas').validation}"></span></a></li>
                            <li ng-class="{'active': viewCtrl.checkSubsection('exposicion','comentarios')}" ng-show="viewCtrl.viewFlags.activeSection=='exposicion'" class="bf-menu-subsect"><a ng-click="viewCtrl.setSubsection('exposicion','comentarios')" href="#">Comentarios <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('exposicion','comentarios').validation}"></span></a></li>
                            
                            
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('covariables','main')}"><a ng-click="viewCtrl.setSubsection('covariables','main')" href="#">Covariables <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('covariables','main').validation}"></span></a></li>
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('analisis','main')}"><a ng-click="viewCtrl.setSubsection('analisis','main')" href="#">Plan de análisis <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('analisis','main').validation}"></span></a></li>
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('limitaciones','main')}"><a ng-click="viewCtrl.setSubsection('limitaciones','main')" href="#">Limitaciones <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('limitaciones','main').validation}"></span></a></li>
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('cronograma','main')}"><a ng-click="viewCtrl.setSubsection('cronograma','main')" href="#">Cronograma <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('cronograma','main').validation}"></span></a></li>
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('bibliografia','main')}"><a ng-click="viewCtrl.setSubsection('bibliografia','main')" href="#">Bibliografía <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('bibliografia','main').validation}"></span></a></li>
                            
                            <li ng-class="{'active': viewCtrl.checkSubsection('resumen','main')}"><a ng-click="viewCtrl.setSubsection('resumen','main')" href="#">Resumen <span class="glyphicon" ng-class="{'glyphicon-ok-sign bf-completed': viewCtrl.checkCompleteness('resumen','main').validation}"></span></a></li>
                        </ul>
                        
                        <center>
                            <button class="btn btn-md btn-next btn-lg" style="margin-top: 20px" ng-click="viewCtrl.sendButton()">Enviar protocolo</button>
                        </center>
                    </div>
                    <div class="col-md-9 fixed-height-col">
                        <div ng-show="viewCtrl.viewFlags.activeSection =='general'">
                            <h1>Datos generales sobre el protocolo</h1>
                            
                                <div ng-show="viewCtrl.viewFlags.activeSubsection == 'main'">
                                    <p>En este apartado debe introducir datos generales sobre el protocolo como el título, hipótesis principal, antecedentes que lo justifican y objectivo principal y secundarios del estudio.</p>
                                    <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('general','titulo')">Siguiente: Título e hipótesis</button></div></div>
                                </div>
                                <div ng-show="viewCtrl.viewFlags.activeSubsection == 'titulo'">
                                    <div class="row">
                                        <div class="form-group">
                                            <label for="titulo">Título del proyecto</label>
                                            <input name="titulo" type="text" class="form-control" ng-model="viewCtrl.protocolo.titulo"></input>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="hipotesis">Hipótesis principal</label>
                                            <input name="hipotesis" type="text" class="form-control" ng-model="viewCtrl.protocolo.hipotesis"></input>
                                        </div>
                                        
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('general','antecedentes')">Siguiente: Antecedentes</button></div></div>
                                    </div>
                                </div>
                                
                                <div ng-show="viewCtrl.viewFlags.activeSubsection == 'antecedentes'">
                                    <div class="row">
                                        <div class="form-group">
                                            <label for="antecedentes">Antecedentes</label>
                                            <textarea name="antecedentes" class="form-control" rows="10" maxlength="6000" ng-model="viewCtrl.protocolo.antecedentes"></textarea>
                                        </div>
                                    </div>
                                    
                                    <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('general','objetivos')">Siguiente: Objetivos</button></div></div>
                                </div>
                                
                                <div ng-show="viewCtrl.viewFlags.activeSubsection == 'objetivos'">
                                    <div class="row">
                                        <div class="form-group">
                                            <label for="objetivos">Objetivos del proyecto</label>
                                            <textarea name="objetivos" class="form-control" rows="10" maxlength="1000" ng-model="viewCtrl.protocolo.objetivos"></textarea>
                                        </div>                            
                                        
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('poblacion','main')">Siguiente: Población a estudio</button></div></div>
                                    </div>
                                    
                                </div>

                            
                            
                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='poblacion'">
                            <h1>Población</h1>
                            <div ng-show="viewCtrl.viewFlags.activeSubsection=='main'">
                                <p>En este apartado debe definir la población que va a ser incluida en el estudio. En primer lugar los años que va a estudiar, la edad y sexo de los pacientes, así como los criterios de inclusión y de exclusión en el estudio.</p>
                                <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('poblacion','periodo')">Siguiente: Periodo de estudio</button></div></div>
                            </div>
                            <div ng-show="viewCtrl.viewFlags.activeSubsection=='periodo'">
                                        <h2>Periodo de estudio</h2>
                                            <div class="form-group">
                                                <div class="row">
                                                    <div class="col-xs-3">
                                                    <label>Desde 1 de enero de:</label>
                                                    </div>
                                                    <div class="col-xs-2">
                                                    <input id="formPeriodoIni" class="form-control" type="number" max="2013" min="2001" value="2005" ng-model="viewCtrl.protocolo.poblacion.periodo.inicio"></input>            
                                                    </div>
                                                    <div class="col-xs-3">
                                                    <label>Hasta 31 de diciembre de:</label>
                                                    </div>
                                                    <div class="col-xs-2">
                                                    <input id="formPeriodoEnd" class="form-control" type="number" max="2014" min="2002" value="2010" ng-model="viewCtrl.protocolo.poblacion.periodo.fin"></input>
                                                    </div>
                                                </div>
                                            </div>
                                            <div clas="form-group">
                                                <h2>Rango de edad y sexo</h2>
                                                <div class="row">
                                                    <div class="col-xs-3">
                                                    <label class="control-label">Edad mínima:</label>
                                                    </div>
                                                    <div class="col-xs-2">
                                                    <input id="formEdadMin" class="form-control" type="number" max="109" min="0" value="0" ng-model="viewCtrl.protocolo.poblacion.edad.minima"></input>            
                                                    </div>
                                                    <div class="col-xs-3">
                                                    <label class="control-label">Edad máxima:</label>
                                                    </div>
                                                    <div class="col-xs-2">
                                                    <input id="formEdadMax" class="form-control" type="number" max="109" min="0" value="109" ng-model="viewCtrl.protocolo.poblacion.edad.maxima"></input>                
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="form-group" style="margin-top: 20px">
                                                <div class="row">
                                                    <div class="col-md-3">
                                                    <label class="control-label" for="sexo">Sexo</label>
                                                    </div>
                                                    <div class="col-md-7">
                                                    <select name="sexo" class="form-control" ng-model="viewCtrl.protocolo.poblacion.sexo">
                                                      <option selected value="ambos">Ambos sexos</option>
                                                      <option value="hombres">Solamente Hombres</option>
                                                      <option value="mujeres">Solamente Mujeres</option>
                                                    </select>
                                                    </div>
                                                </div>
                                            </div>
            
                                            
                                        
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('poblacion','inclusion')">Siguiente: Criterios de inclusión</button></div></div>
                                        
            
                                        

                                </div>
                                
                                <div ng-show="viewCtrl.viewFlags.activeSubsection=='inclusion'">

                                        <div class="form-group">
                                            <label for="inclusion">Criterios de inclusión</label>
                                            <textarea id="inclusion" class="form-control" rows=10 maxlength="1500" ng-model="viewCtrl.protocolo.poblacion.inclusion"></textarea>
                                        </div>
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('poblacion','exclusion')">Siguiente: Criterios de exclusión</button></div></div>
                                        

                                </div>
                                
                                <div ng-show="viewCtrl.viewFlags.activeSubsection=='exclusion'">

                                        <div class="form-group">
                                            <label for="exclusion">Criterios de exclusion</label>
                                            <textarea id="exclusion" class="form-control" rows=10 maxlength="1500" ng-model="viewCtrl.protocolo.poblacion.exclusion"></textarea>
                                        </div>
                                        
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('poblacion','comentarios')">Siguiente: Comentarios</button></div></div>
            

                                </div>
                                
                                <div ng-show="viewCtrl.viewFlags.activeSubsection=='comentarios'">

                                        <div class="form-group">
                                            <label for="formPoblacionComentarios">Comentarios adicionales sobre población a estudio</label>
                                            <textarea id="formPoblacionComentarios" class="form-control" rows=10 maxlength="1500" ng-model="viewCtrl.protocolo.poblacion.comentarios"></textarea>
                                        </div>
                                        
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('evento','main')">Siguiente: Definición del evento (casos)</button></div></div>

                                </div>
                               
                            </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='evento'">
                            <h1>Evento principal - Definición de caso</h1>
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'main'">
                                <p>En este apartado debe definir los criterios que definen el evento (outcome o caso) que quiere estudiar.</p>
                                <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('evento','definicion')">Siguiente: Definición de caso</button></div></div>
                                
                                
                            </div>
                            
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'definicion'">
                                        <div class="form-group">
                                            <label class="control-label" for="formSexo">El evento (caso) a estudiar tiene que ver con:</label>
                                            <select class="form-control" ng-model="viewCtrl.protocolo.caso.tipo">
                                                <option value="diagnostico" selected>Un diagnóstico</option>
                                                <option value="farmaco">El uso de fármacos</option>
                                                <option value="mixto">Un diagnóstico y/o el uso de fármacos</option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="">Escriba una definición clínica del evento (definición de caso) que quiere incluir en el estudio</label>
                                            <textarea class="form-control" rows="6" maxlength="1500" ng-model="viewCtrl.protocolo.caso.definicion"></textarea>
                                        </div>
                                        
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('evento','avanzadas')">Siguiente: Definición avanzada de caso</button></div></div>

                            </div>
                            
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'avanzadas'">
                                
                                <div class="form-group">
                                    <div>La definición requiere datos adicionales (analíticas, derivaciones a especialistas...)
                                        <label class="radio-inline">
                                          <input type="radio" name="eventoUsaDGP" ng-model="viewCtrl.protocolo.caso.adicionales.requerido" ng-value="true"> Si
                                        </label>
                                        <label class="radio-inline">
                                          <input type="radio" name="eventoUsaDGP" ng-model="viewCtrl.protocolo.caso.adicionales.requerido" ng-value="false"> No
                                        </label>

                                    </div>
                                    
                                    <div ng-show="viewCtrl.protocolo.caso.adicionales.requerido">
                                        <label for="eventoUsaDGPDetalles">Describa los criterios para definir el evento con datos adicionales (analíticas, derivaciones, etc)</label>
                                        <textarea class="form-control" rows="6" maxlength="1500" ng-model="viewCtrl.protocolo.caso.adicionales.detalles"></textarea>
                                    </div>
                                </div>
                                

                                
                                <div ng-hide="viewCtrl.protocolo.caso.tipo == 'diagnostico'">¿Se requiere clasificación de los casos según dosis?
                                    <label class="radio-inline">
                                      <input type="radio" ng-value="true" ng-model="viewCtrl.protocolo.caso.dosis.requerido"> Si
                                    </label>
                                    <label class="radio-inline">
                                      <input type="radio" ng-value="false" ng-model="viewCtrl.protocolo.caso.dosis.requerido"> No
                                    </label>
                                
                                
                                    <div ng-show="viewCtrl.protocolo.caso.dosis.requerido">
                                        <select class="form-control" ng-model="viewCtrl.protocolo.caso.dosis.tipo">
                                            <option value="ddd">Según valores oficiales de Dosis Diaria Definida</option>
                                            <option value="manual">Según puntos de corte definidos manualmente para cada fármaco</option>
                                            <option value="otros">Otros criterios</option>
                                        </select>
                                        
                                        <div ng-hide="viewCtrl.protocolo.caso.dosis.tipo == 'ddd'">
                                            <label  ng-show="viewCtrl.protocolo.caso.dosis.tipo == 'manual'">Especifique los puntos de corte para dosis baja, intermedia y alta de cada fármaco:</label>
                                            <label  ng-show="viewCtrl.protocolo.caso.dosis.tipo == 'otros'">Especifique los criterios de estratificación por dosis para cada fármaco:</label>
                                            
                                            <textarea class="form-control" rows="4" maxlength="1500" ng-model="viewCtrl.protocolo.caso.dosis.detalles"></textarea>
                                        </div>
                                        
                                    </div>
                                    

                                </div>

                                <div ng-hide="viewCtrl.protocolo.caso.tipo == 'diagnostico'">¿Se requiere clasificación de los casos según duración del tratamiento?
                                    <label class="radio-inline">
                                      <input type="radio" name="eventoRequiereDuracion" ng-value="true" ng-model="viewCtrl.protocolo.caso.duracion.requerido"> Si
                                    </label>
                                    <label class="radio-inline">
                                      <input type="radio" name="eventoRequiereDuracion" ng-value="false" ng-model="viewCtrl.protocolo.caso.duracion.requerido"> No
                                    </label>
                                    
                                    <div ng-show="viewCtrl.protocolo.caso.duracion.requerido" class="form-group">
                                        <div>
                                            <input type="radio" name="eventoDuracion" value="continua" ng-model="viewCtrl.protocolo.caso.duracion.tipo"> <strong>Duración contínua:</strong> desde la primera prescripción de estudio se van encadenando las duraciones de todas las prescripciones siguientes mientras entre el final de una y el principio de la siguiente no pasen más de <input type="text" ng-model="viewCtrl.protocolo.caso.duracion.gap" size="2"> días (gap).
                                        </div>
                                        <div>
                                            <input type="radio" name="eventoDuracion" value="acumulada" ng-model="viewCtrl.protocolo.caso.duracion.tipo"> <strong>Duración acumulada:</strong> tiempo total que ha estado utilizando el fármaco/s de interés independientemente de que sea en contínuo o no.
                                        </div>
                                    </div>
                                    
                                    
                                </div>
                                
                                <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('evento','comentarios')">Siguiente: Comentarios</button></div></div>
                                
                            </div>
                                
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'comentarios'">
                                <div class="form-group">
                                    <label >Si tiene experiencia usando datos de BIFAP puede opcionalmente describir una definición operativa más detallada</label>
                                    <textarea class="form-control" rows="16" maxlength="1500" ng-model="viewCtrl.protocolo.caso.comentarios"></textarea>
                                </div>
                                
                                <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('controles','main')">Siguiente: Controles</button></div></div>
                            </div>
                            
                            
                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='controles'">
                            <h1>Controles</h1>
                            
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'main'">
                                <p>En esta sección debe específicar los criterios para la selección de los controles en el estudio.</p>
                                    <div class="form-group">
                                        <label>Número de controles por caso</label>
                                        <input id="formNumControlesPorCaso" type="number" min="1" max="10" class="form-control" value="1" ng-model="viewCtrl.protocolo.controles.numero"></input>
                                    </div>
                                    <div>
                                        <div class="col-md-9 bf-underlined">
                                        Se requiere emparejamiento de casos y controles
                                        </div>
                                        <div class="col-md-3">
                                        <label class="radio-inline">
                                          <input type="radio" name="emparejamiento" ng-value="true" ng-model="viewCtrl.protocolo.controles.emparejamiento.requerido" > Si
                                        </label>
                                        <label class="radio-inline">
                                          <input type="radio" name="emparejamiento" ng-value="false" ng-model="viewCtrl.protocolo.controles.emparejamiento.requerido"> No
                                        </label>
                                        </div>
                                        
                                        <div ng-show="viewCtrl.protocolo.controles.emparejamiento.requerido">
                                            
                                            <div class="form-group">

                                                    <div class="col-md-8 col-md-offset-1 bf-underlined">
                                                        Emparejamiento por edad
                                                    </div>
                                                    <div class="col-md-3">
                                                        <label class="radio-inline">
                                                          <input type="radio" name="emparejamientoEdad" ng-value="true" ng-model="viewCtrl.protocolo.controles.emparejamiento.edad"> Si
                                                        </label>
                                                        <label class="radio-inline">
                                                          <input type="radio" name="emparejamientoEdad" ng-value="false" ng-model="viewCtrl.protocolo.controles.emparejamiento.edad" > No
                                                        </label>
                                                    </div>

                                            </div> 
                                            
                                            <div class="form-group">
                                                <div class="col-md-8 col-md-offset-1 bf-underlined">
                                                    Emparejamiento por sexo
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="radio-inline">
                                                      <input type="radio" name="emparejamientoSexo" ng-value="true" ng-model="viewCtrl.protocolo.controles.emparejamiento.sexo"> Si
                                                    </label>
                                                    <label class="radio-inline">
                                                      <input type="radio" name="emparejamientoSexo" ng-value="false" ng-model="viewCtrl.protocolo.controles.emparejamiento.sexo"> No
                                                    </label>
                                                </div>
                                            </div> 
                                            
                                            <div class="form-group">
                                                <div class="col-md-8 col-md-offset-1 bf-underlined">
                                                    Emparejamiento por año calendario
                                                </div>
                                                <div class="col-md-3">
                                                    <label class="radio-inline">
                                                      <input type="radio" name="emparejamientoPeriodo" ng-value="false" ng-model="viewCtrl.protocolo.controles.emparejamiento.periodo"> Si
                                                    </label>
                                                    <label class="radio-inline">
                                                      <input type="radio" name="emparejamientoPeriodo" ng-value="false" ng-model="viewCtrl.protocolo.controles.emparejamiento.periodo"> No
                                                    </label>
                                                </div>
                                            </div> 
                                            
                                            <div class="form-group">
                                                <label for="emparejamientoDetalles">Otros criterios de emparejamiento</label>
                                                <textarea id="emparejamientoDetalles" class="form-control" rows="3" maxlength="1500" ng-model="viewCtrl.protocolo.controles.emparejamiento.detalles"></textarea>
                                            </div>
                                        </div>
                                        
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('exposicion','main')">Siguiente: Exposición principal</button></div></div>
                                    </div>
 
                            </div>
                            
                            
                            
                            
                            
                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='exposicion'">
                            <h1>Exposición principal</h1>
                            
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'main'">
                                <p>En esta sección debe definir la exposición principal del estudio.</p>
                                <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('exposicion','definicion')">Siguiente: Definición de la exposición principal</button></div></div>
                            </div>
                            
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'definicion'">
                                        <div class="form-group">
                                            <label class="control-label" for="formSexo">La exposición principal a estudiar tiene que ver con:</label>
                                            <select class="form-control" ng-model="viewCtrl.protocolo.exposicion.tipo">
                                                <option value="diagnostico" selected>Un diagnóstico</option>
                                                <option value="farmaco">El uso de fármacos</option>
                                                <option value="mixto">Un diagnóstico y/o el uso de fármacos</option>
                                            </select>
                                        </div>

                                        <div class="form-group">
                                            <label for="">Escriba una definición clínica de la exposición principal que quiere analizar en el estudio</label>
                                            <textarea class="form-control" rows="6" maxlength="1500" ng-model="viewCtrl.protocolo.exposicion.definicion"></textarea>
                                        </div>
                                        
                                        <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('exposicion','avanzadas')">Siguiente: Definición avanzada de la exposición principal</button></div></div>

                            </div>
                            
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'avanzadas'">
                                
                                <div class="form-group">
                                    <div>La definición de la exposición principal requiere datos adicionales (analíticas, derivaciones...)
                                        <label class="radio-inline">
                                          <input type="radio" name="exposicionUsaDGP" ng-model="viewCtrl.protocolo.exposicion.adicionales.requerido" ng-value="true"> Si
                                        </label>
                                        <label class="radio-inline">
                                          <input type="radio" name="exposicionUsaDGP" ng-model="viewCtrl.protocolo.exposicion.adicionales.requerido" ng-value="false"> No
                                        </label>

                                    </div>
                                    
                                    <div ng-show="viewCtrl.protocolo.exposicion.adicionales.requerido">
                                        <label for="eventoUsaDGPDetalles">Describa los criterios para definir la exposición principal con datos adicionales (analíticas, derivaciones, etc)</label>
                                        <textarea class="form-control" rows="6" maxlength="1500" ng-model="viewCtrl.protocolo.exposicion.adicionales.detalles"></textarea>
                                    </div>
                                </div>
                                

                                
                                <div ng-hide="viewCtrl.protocolo.exposicion.tipo == 'diagnostico'">¿Se requiere clasificación de la exposición principal según dosis?
                                    <label class="radio-inline">
                                      <input type="radio" ng-value="true" ng-model="viewCtrl.protocolo.exposicion.dosis.requerido"> Si
                                    </label>
                                    <label class="radio-inline">
                                      <input type="radio" ng-value="false" ng-model="viewCtrl.protocolo.exposicion.dosis.requerido"> No
                                    </label>
                                
                                
                                    <div ng-show="viewCtrl.protocolo.exposicion.dosis.requerido">
                                        <select class="form-control" ng-model="viewCtrl.protocolo.exposicion.dosis.tipo">
                                            <option value="ddd">Según valores oficiales de Dosis Diaria Definida</option>
                                            <option value="manual">Según puntos de corte definidos manualmente para cada fármaco</option>
                                            <option value="otros">Otros criterios</option>
                                        </select>
                                        
                                        <div ng-hide="viewCtrl.protocolo.exposicion.dosis.tipo == 'ddd'">
                                            <label  ng-show="viewCtrl.protocolo.exposicion.dosis.tipo == 'manual'">Especifique los puntos de corte para dosis baja, intermedia y alta de cada fármaco:</label>
                                            <label  ng-show="viewCtrl.protocolo.exposicion.dosis.tipo == 'otros'">Especifique los criterios de estratificación por dosis para cada fármaco:</label>
                                            
                                            <textarea class="form-control" rows="4" maxlength="1500" ng-model="viewCtrl.protocolo.exposicion.dosis.detalles"></textarea>
                                        </div>
                                        
                                    </div>
                                    

                                </div>

                                <div ng-hide="viewCtrl.protocolo.exposicion.tipo == 'diagnostico'">¿Se requiere clasificación de la exposición principal según duración del tratamiento?
                                    <label class="radio-inline">
                                      <input type="radio" name="exposicionRequiereDuracion" ng-value="true" ng-model="viewCtrl.protocolo.exposicion.duracion.requerido"> Si
                                    </label>
                                    <label class="radio-inline">
                                      <input type="radio" name="exposicionRequiereDuracion" ng-value="false" ng-model="viewCtrl.protocolo.exposicion.duracion.requerido"> No
                                    </label>
                                    
                                    <div ng-show="viewCtrl.protocolo.exposicion.duracion.requerido" class="form-group">
                                        <div>
                                            <input type="radio" name="exposicionDuracion" value="continua" ng-model="viewCtrl.protocolo.exposicion.duracion.tipo"> <strong>Duración contínua:</strong> desde la primera prescripción de estudio se van encadenando las duraciones de todas las prescripciones siguientes mientras entre el final de una y el principio de la siguiente no pasen más de <input type="text" ng-model="viewCtrl.protocolo.exposicion.duracion.gap" size="2"> días (gap).
                                        </div>
                                        <div>
                                            <input type="radio" name="exposicionDuracion" value="acumulada" ng-model="viewCtrl.protocolo.exposicion.duracion.tipo"> <strong>Duración acumulada:</strong> tiempo total que ha estado utilizando el fármaco/s de interés independientemente de que sea en contínuo o no.
                                        </div>
                                    </div>
                                    
                                    
                                </div>
                                
                                <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('exposicion','comentarios')">Siguiente: Comentarios sobre exposición principal</button></div></div>
                                
                            </div>
                                
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'comentarios'">
                                <div class="form-group">
                                    <label >Si tiene experiencia usando datos de BIFAP puede opcionalmente describir una definición operativa más detallada de la exposición principal</label>
                                    <textarea class="form-control" rows="16" maxlength="1500" ng-model="viewCtrl.protocolo.exposicion.comentarios"></textarea>
                                </div>
                                
                                <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('covariables','main')">Siguiente: Covariables</button></div></div>
                            </div>
                            
                            
                            
                            
                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='covariables'">
                            <h1>Covariables <button class="btn btn-next" ng-hide="viewCtrl.viewFlags.creatingCovariable || viewCtrl.viewFlags.editingCovariable" ng-click='viewCtrl.viewFlags.creatingCovariable = true'><span class="glyphicon glyphicon-plus-sign"></span> Crear covariable</button></h1>
                            
                            
                            <div class="form" ng-show="viewCtrl.viewFlags.creatingCovariable">
                                <div class="form-group">
                                    <label class="control-label" for="formSexo">La nueva  covariable es:</label>
                                    <select class="form-control" ng-model="viewCtrl.newCovariable.tipo" ng-change="viewCtrl.syncNewCovariableName()">
                                        <option value="diagnostico" selected>Un diagnóstico</option>
                                        <option value="farmaco">El uso de un fármaco</option>
                                        <option value="tabaco">Tabaquismo</option>
                                        <option value="alcohol">Consumo de alcohol</option>
                                        <option value="imc">Índice de masa corporal</option>
                                    </select>
                                </div>
                                
                                <div ng-hide="viewCtrl.newCovariable.tipo == ''">
                                    <div class="form-group">
                                        <label>Nombre de la nueva covariable </label>
                                        <input type="text" class="form-control" ng-model="viewCtrl.newCovariable.nombre"></input>
                                    </div>
                                    
                                    <div class="form-group" ng-show="viewCtrl.newCovariable.tipo === 'diagnostico' || viewCtrl.newCovariable.tipo === 'farmaco'">
                                        <label>Definición de la nueva covariable</label>
                                        <textarea class="form-control" rows="6" maxlength="1500" ng-model="viewCtrl.newCovariable.definicion"></textarea>
                                    </div>
                                    
                                    <div class="form-group" ng-show="viewCtrl.newCovariable.tipo === 'diagnostico' || viewCtrl.newCovariable.tipo === 'farmaco'">
                                        <div>
                                            <input type="radio" name="newCovariableTemporalidad" value="ever" ng-model="viewCtrl.newCovariable.temporalidad.tipo"> buscar la covariable en cualquier momento antes de la fecha índice.
                                        </div>
                                        <div>
                                            <input type="radio" name="newCovariableTemporalidad" value="recent" ng-model="viewCtrl.newCovariable.temporalidad.tipo"> buscar la covariable solo en los <input type="text" ng-model="viewCtrl.newCovariable.temporalidad.dias" size="2"> días previos a la fecha índice.
                                        </div>
                                        <div>*fecha índice es la fecha en la que ocurre el caso o en la que se selecionan sus controles</div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Comentarios adicionales</label>
                                        <textarea class="form-control" rows="6" maxlength="1500" ng-model="viewCtrl.newCovariable.comentarios"></textarea>
                                    </div>
    
                                    <center><button class="btn btn-next" ng-click='viewCtrl.addCovariable()'>Añadir covariable</button></center>
                                    
                                </div>

                            </div>
                            
                            <div class="panel panel-bifap" ng-show="viewCtrl.viewFlags.editingCovariable">
                                <div class="panel-heading">
                                    <h4 class="panel-title"><span ng-class="{'icon-user-md': viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].tipo == 'diagnostico', 'icon-pill': viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].tipo == 'farmaco', 'glyphicon glyphicon-briefcase': viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].tipo != 'diagnostico' && viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].tipo != 'farmaco'}"></span> {{viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].nombre}} (editar detalles)</h4>
                                </div>
                                
                                <div class="panel-body">

                                    <div class="form-group" ng-show="viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].tipo === 'diagnostico' || viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].tipo === 'farmaco'">
                                        <label>Definición</label>
                                        <textarea class="form-control" rows="6" maxlength="1500" ng-model="viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].definicion"></textarea>
                                    </div>
                                    
                                    <div class="form-group" ng-show="viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].tipo === 'diagnostico' || viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].tipo === 'farmaco'">
                                        <div>
                                            <input type="radio" name="newCovariableTemporalidad" value="ever" ng-model="viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].temporalidad.tipo"> en cualquier momento antes de la fecha del evento.
                                        </div>
                                        <div>
                                            <input type="radio" name="newCovariableTemporalidad" value="recent" ng-model="viewCtrl.protocolo.covariables[self.editingCovariableIndex].temporalidad.tipo"> solo en los <input type="text" ng-model="viewCtrl.protocolo.covariables[self.editingCovariableIndex].temporalidad.dias" size="2"> días previos al evento.
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Comentarios adicionales</label>
                                        <textarea class="form-control" rows="6" maxlength="1500" ng-model="viewCtrl.protocolo.covariables[viewCtrl.editingCovariableIndex].comentarios"></textarea>
                                    </div>
                                    <center><button class="btn btn-next" ng-click='viewCtrl.viewFlags.editingCovariable = false'><span style="font-size: 2em" class="glyphicon glyphicon-ok-circle"></span></button></center>
                                </div>
                            </div>
                            
                            
                            
                            <div class="panel panel-bifap" style="margin-top: 20px">
                                <div class="panel-heading"><h3 class="panel-title">Lista de covariables</h3></div>
                                <div class="panel-body">
                                    <div ng-show="viewCtrl.protocolo.covariables.length < 1">No se ha definido ninguna covariable</div>
                                    <div ng-repeat="covariable in viewCtrl.protocolo.covariables track by $index">
                                        <div class="col-md-6" style="display:table; margin-top: 10px;">
                                            <div class="form-inline" style="display: table-cell; vertical-align: middle;">
                                                <span  ng-class="{'icon-user-md': covariable.tipo == 'diagnostico', 'icon-pill': covariable.tipo == 'farmaco', 'glyphicon glyphicon-briefcase': covariable.tipo != 'diagnostico' && covariable.tipo != 'farmaco'}"></span>
                                               <input ng-model="covariable.nombre" type="text" class="form-control" ng-change="covariable.nombre.toUppercase()" ></input>
                                               <button class="btn btn-bifap" ng-click="viewCtrl.editCovariable($index)" ><span class="glyphicon glyphicon-cog"></span></button>
                                               
                                               
                                               
                                               <button class="btn btn-next" data-toggle="modal" data-target="#deleteCovariableModal" ng-click="viewCtrl.setVariableToDelete(covariable)" ><span class="glyphicon glyphicon-trash"></span></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="deleteCovariableModal" class="modal fade" tabindex="-1" role="dialog">
                              <div class="modal-dialog">
                                <div class="modal-content">
                                  <div class="modal-body">
                                    <center>
                                       <p>¿Está seguro de que quiere eliminar la covariable {{viewCtrl.covariableToDelete.nombre}}?</p>
                                        <p><span style="font-size: 1.5em" class="glyphicon glyphicon-warning-sign"></span></p>
                                        <strong>¡Atención! esta acción es irreversible.</strong>
                                    </center>
                                  </div>
                                  <div class="modal-footer">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <center>
                                            <button type="button" class="btn btn-bifap" data-dismiss="modal"><span class="glyphicon glyphicon-remove-circle"></span> Cancelar</button>
                                            </center>
                                        </div>
                                        <div class="col-md-6">
                                            <center>
                                            <button type="button" class="btn btn-next" data-dismiss="modal" ng-click="viewCtrl.deleteCovariable()"><span class="glyphicon glyphicon-trash"></span> Borrar</button>
                                            </center>
                                        </div>
                                    </div>
                                  </div>
                                </div><!-- /.modal-content -->
                              </div><!-- /.modal-dialog -->
                            </div><!-- /.modal -->
                            
                            <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('analisis','main')">Siguiente: Análisis</button></div></div>
                            
                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='analisis'">
                            <h1>Análisis</h1>
                            <p>Indique los análisis que planea realizar en el estudio.</p>
                            
                            <div class="form-group">
                            Calcular incidencia del evento en la cohorte
                                <label class="radio-inline">
                                  <input type="radio" ng-value="true" ng-model="viewCtrl.protocolo.analisis.incidencia.requerido"> Si
                                </label>
                                <label class="radio-inline">
                                  <input type="radio" ng-value="false" ng-model="viewCtrl.protocolo.analisis.incidencia.requerido"> No
                                </label>
                                <div ng-show="viewCtrl.protocolo.analisis.incidencia.requerido">
                                    <label for="incidenciaCalculoDetalles">Indique cómo va a calcular y analizar la incidencia en la cohorte cruda</label>
                                    <textarea id="incidenciaCalculoDetalles" class="form-control" rows="3" maxlength="1500" ng-model="viewCtrl.protocolo.analisis.incidencia.detalles"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-group">
                            Calcular estimadores crudos y ajustados de Odds Ratio
                                <label class="radio-inline">
                                  <input type="radio" ng-value="true" ng-model="viewCtrl.protocolo.analisis.or.requerido"> Si
                                </label>
                                <label class="radio-inline">
                                  <input type="radio" ng-value="false" ng-model="viewCtrl.protocolo.analisis.or.requerido"> No
                                </label>
                                <div ng-show="viewCtrl.protocolo.analisis.or.requerido">
                                    <label>Indique cómo va a realizar el cálculo y análisis de estimadores de riesgo. Incluya las categorías de referencia.</label>
                                    <textarea class="form-control" rows="3" maxlength="1500" ng-model="viewCtrl.protocolo.analisis.or.detalles"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-group">
                            Análisis de subgrupos
                                <label class="radio-inline">
                                  <input type="radio" ng-value="true" ng-model="viewCtrl.protocolo.analisis.subgrupos.requerido"> Si
                                </label>
                                <label class="radio-inline">
                                  <input type="radio" ng-value="false" ng-model="viewCtrl.protocolo.analisis.subgrupos.requerido"> No
                                </label>
                                <div ng-show="viewCtrl.protocolo.analisis.subgrupos.requerido">
                                    <label>Indique cómo va a realizar el análisis de subgrupos</label>
                                    <textarea class="form-control" rows="3" maxlength="1500" ng-model="viewCtrl.protocolo.analisis.subgrupos.detalles"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-group">
                            Análisis de sensibilidad
                                <label class="radio-inline">
                                  <input type="radio" ng-value="true" ng-model="viewCtrl.protocolo.analisis.sensibilidad.requerido"> Si
                                </label>
                                <label class="radio-inline">
                                  <input type="radio" ng-value="false" ng-model="viewCtrl.protocolo.analisis.sensibilidad.requerido"> No
                                </label>
                                <div ng-show="viewCtrl.protocolo.analisis.sensibilidad.requerido">
                                    <label>Indique cómo va a realizar el análisis de subgrupos</label>
                                    <textarea class="form-control" rows="3" maxlength="1500" ng-model="viewCtrl.protocolo.analisis.sensibilidad.detalles"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="otroCalculoDetalles">Describa otros análisis adicionales de manera opcional</label>
                                <textarea id="otroCalculoDetalles" class="form-control" rows="10" maxlength="1500" ng-model="viewCtrl.protocolo.analisis.otros"></textarea>
                            </div>
                            
                            <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('limitaciones','main')">Siguiente: Limitaciones</button></div></div>
                        </div>
                        
                        <div ng-show="viewCtrl.viewFlags.activeSection=='limitaciones'">
                            <h1>Limitaciones</h1>
                            <div class="form-group">
                                <label>Señale las potenciales limitaciones del protocolo de estudio</label>
                                <textarea class="form-control" rows="20" maxlength="1500" ng-model="viewCtrl.protocolo.limitaciones"></textarea>
                            </div>
                            <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('cronograma','main')">Siguiente: Cronograma</button></div></div>
                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='cronograma'">
                            <h1>Cronograma</h1>
                            
                            <div class="form-group">
                                <label>Describa un cronograma aproximado del estudio</label>
                                <textarea class="form-control" rows="20" maxlength="1500" ng-model="viewCtrl.protocolo.cronograma"></textarea>
                            </div>
                            <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('bibliografia','main')">Siguiente: Bibliografía</button></div></div>
                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='bibliografia'">
                            <h1>Bibliografía</h1>
                            <div class="form-group">
                                <label>Incluya lista de referencias bibliográficas relevantes en estilo Vancouver</label>
                                <textarea class="form-control" rows="20" maxlength="3500" ng-model="viewCtrl.protocolo.bibliografia"></textarea>
                            </div>
                            <div class"row"><div class="col-md-4 col-md-offset-8"><button style="float: right"  class="btn btn-bifap btn-lg" ng-click="viewCtrl.setSubsection('resumen','main')">Siguiente: Resumen final</button></div></div>
                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='resumen'">
                            <h1>Resumen</h1>

                            <div class="form-group">
                                <label for="formResumenDelProyecto">Resumen del proyecto</label>
                                <textarea ng-model="viewCtrl.protocolo.resumen.manual" id="formResumenDelProyecto" class="form-control" rows="10" maxlength="1500"></textarea>
                                
                            </div>
                            
                            <p>Ejemplo de resumen generado automáticamente (puede usarlo como base para redactar el suyo)</p>
                            <div class="bf-resumen-automatico">{{viewCtrl.protocolo.resumen.automatico}}</div>
                            


                        </div>
                        <div ng-show="viewCtrl.viewFlags.activeSection=='envio'">
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'error'">
                                <h1>No ha sido posible enviar su protocolo</h1>
                                <h2>Estos son los errores pendientes de corregir:</h2>
                                <div ng-repeat="error in viewCtrl.error_msg" class="row">
                                    <div class="col-md-1">
                                        <a href="#" ng-click='viewCtrl.setSubsection(error.section,error.subsection)'>Corregir</a>
                                    </div>
                                    <div class="col-md-11">
                                        <span>{{error.msg}}</span>
                                    </div>
                                </div>
                            </div>
                            <div ng-show="viewCtrl.viewFlags.activeSubsection == 'success'">
                                <h1>Protocolo enviado con éxito!</h1>
                                <p>*JSON del estudio (para enviar a informática)</p>
                                <pre>{{viewCtrl.protocolo}}</pre>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>